(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(53)},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),s=n.n(o),c=n(4),i=n(17),u=n(30),l=Object(i.combineReducers)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MOVIES":return t.movies;default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.user;case"LOGOUT":return{};default:return e}},showError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ERROR":return t.error;default:return e}},userFavorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAVORITES":return t.favorites;default:return e}}}),p=n(5),m=(n(41),n(1)),h=n.n(m),d=n(3),v=n(11),f=n(12),b=n(14),g=n(13),E=n(15),w=(n(43),function(e){return{type:"LOGIN",user:e}}),O=function(e){return{type:"SHOW_ERROR",error:e}},j=function(e){return{type:"SET_FAVORITES",favorites:e}},y=n(7),k=(n(44),function(e){var t=e.poster,n=e.id,a=(e.backDrop,"http://image.tmdb.org/t/p/w185//".concat(t));return r.a.createElement(p.b,{to:"/".concat(n),key:n,className:"movie"},r.a.createElement("img",{src:a,alt:"movie poster"}))}),x=(n(46),function(e){var t=e.movies.map(function(e){return r.a.createElement(k,{backDrop:e.backdrop_path,poster:e.poster_path,rating:e.vote_average,id:e.id,key:e.id,title:e.title})});return r.a.createElement("section",{className:"movie-container"},t)}),N=n(22),S=(n(47),function(e){var t=e.email,n=e.password,a=e.handleChange,o=e.handleSubmit;return r.a.createElement("section",null,r.a.createElement("form",{className:"log-in-form",onSubmit:o},r.a.createElement("input",{className:"log-in",type:"text",value:t,name:"email",placeholder:"example@example.com",onChange:a}),r.a.createElement("input",{className:"log-in",type:"password",value:n,name:"password",placeholder:"Password",onChange:a}),r.a.createElement("button",{className:"log-in-btn"},"Login")))}),C=function(){var e=Object(d.a)(h.a.mark(function e(t){var n,a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},e.next=4,fetch("https://movietracker-be.herokuapp.com/api/v1/users",n);case 4:return a=e.sent,e.abrupt("return",a.ok);case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0.message),new Error("Failed to post error");case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(h.a.mark(function e(t){var n,a,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},e.next=4,fetch("https://movietracker-be.herokuapp.com/api/v1/login",n);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(0),new Error("Email and password do not match");case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(h.a.mark(function e(t,n){var a,r,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}},e.next=4,fetch("https://movietracker-be.herokuapp.com/api/v1/users/".concat(t,"/favorites"),a);case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",o.data);case 11:throw e.prev=11,e.t0=e.catch(0),new Error("failed to fetch favorites");case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(h.a.mark(function e(t){var n,a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://movietracker-be.herokuapp.com/api/users/".concat(t,"/favorites"));case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a.data);case 10:throw e.prev=10,e.t0=e.catch(0),new Error("Failed to fetch favorites");case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(h.a.mark(function e(t,n){var a,r,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"DELETE",headers:{"Content-Type":"application/json"}},e.next=4,fetch("http://localhost:3001//api/v1/users/".concat(t,"/favorites/").concat(n),a);case 4:return r=e.sent,e.next=7,r.json();case 7:o=e.sent,console.log(o),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}(),L=(n(48),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(N.a)({},a,r))},n.handleSubmit=function(){var e=Object(d.a)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,F(n.state).then(function(e){return n.props.login(e)});case 4:return n.setState({display:"loggedIn"}),e.next=7,I(n.props.user.id).then(function(e){return n.props.setFavorites(e)});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n.setState({error:e.t0.message});case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),n.state={name:"",email:"",password:"",display:"start",error:null},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e;return e="loggedIn"===this.state.display?r.a.createElement(y.a,{to:"/LoggedIn"}):r.a.createElement(S,{email:this.state.email,password:this.state.password,handleChange:this.handleChange,handleSubmit:this.handleSubmit}),r.a.createElement("div",{className:"log-in-bar"},e,this.state.error&&r.a.createElement("h2",{className:"error"},this.state.error))}}]),t}(a.Component)),A=Object(c.b)(function(e){return{login:e.login,user:e.login,error:e.showError}},function(e){return{login:function(t){return e(w(t))},showError:function(t){return e(O(t))},setFavorites:function(t){return e(j(t))}}})(L),D=(n(49),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleFavorite=Object(d.a)(h.a.mark(function e(){var t,a,r,o,s,c,i,u;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==n.state.isFavorited){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=n.props,a=t.title,r=t.poster_path,o=t.overview,s=t.vote_average,c=t.release_date,i=t.user,u=t.id,e.next=6,_({movie_id:u,user_id:i.id,title:a,poster_path:r,release_date:c,vote_average:s,overview:o});case 6:return e.next=8,I(i.id).then(function(e){return n.props.setFavorites(e)});case 8:n.setState({isFavorited:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[2,11]])})),n.handleDelete=Object(d.a)(h.a.mark(function e(){var t,a,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.props,a=t.user,r=t.id,e.next=4,T(a.id,r);case 4:return e.next=6,I(a.id).then(function(e){return n.props.setFavorites(e)});case 6:n.setState({isFavorited:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),n.state={error:"",isFavorited:!1},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.backdrop_path,o=t.overview,s=t.vote_average,c=t.release_date;t.user;console.log(this.props);var i="http://image.tmdb.org/t/p/w1280//".concat(a);return r.a.createElement("div",{className:"container"},r.a.createElement("section",{className:"specs"},r.a.createElement("h2",{className:"title"},n),r.a.createElement("h3",{className:"rating"}," Rating : ",s," / 10"),r.a.createElement("h3",{className:"date"},"Release Date: ",c),r.a.createElement("p",{className:"description"},o),r.a.createElement("h3",null,this.state.error),r.a.createElement("button",{onClick:function(){return e.handleFavorite()},className:"btn"},"Add to Favorites"),r.a.createElement("button",{onClick:function(){return e.handleDelete()},className:"btn"},"Delete Favorite"),r.a.createElement(p.b,{to:"/LoggedIn"},r.a.createElement("button",{className:"back-btn"},"\u25c0 Back"))),r.a.createElement("section",{className:"image"},r.a.createElement("img",{src:i,alt:"movie backdrop",className:"back-drop"})))}}]),t}(a.Component)),R=Object(c.b)(function(e){return{user:e.login}},function(e){return{setFavorites:function(t){return e(j(t))}}})(D),W=(n(50),function(e){var t=e.name,n=e.email,a=e.password,o=e.handleAddChange,s=e.handleAdd;return r.a.createElement("section",null,r.a.createElement("form",{className:"sign-in-form",onSubmit:s},r.a.createElement("input",{className:"sign-up",type:"text",value:t,name:"name",placeholder:"Name",onChange:o}),r.a.createElement("input",{className:"sign-up",type:"text",value:n,name:"email",placeholder:"example@example.com",onChange:o}),r.a.createElement("input",{className:"sign-up",type:"password",value:a,name:"password",placeholder:"Password",onChange:o}),r.a.createElement("button",{className:"sign-up-btn"},"Sign Up")))}),J=(Object(c.b)(function(e){return{error:e.error}})(W),n(51),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleAddChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(N.a)({},a,r))},n.handleAdd=function(){var e=Object(d.a)(h.a.mark(function e(t){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,C(n.state);case 4:a=e.sent,console.log(a),!0===a?(n.props.login(n.state),n.setState({display:"loggedIn"})):n.setState({error:"Email has already been used"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n.setState({error:e.t0.message});case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),n.state={name:"",email:"",password:"",display:"",error:null},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e;return e="loggedIn"===this.state.display?r.a.createElement(y.a,{to:"/LoggedIn"}):r.a.createElement(W,{name:this.state.name,email:this.state.email,password:this.state.password,handleAddChange:this.handleAddChange,handleAdd:this.handleAdd}),r.a.createElement("section",{className:"sign-up-bar"},e,this.state.error&&r.a.createElement("h2",{className:"error"},this.state.error))}}]),t}(a.Component)),M=Object(c.b)(function(e){return{showError:e.showError}},function(e){return{login:function(t){return e(w(t))},showError:function(t){return e(O(t))}}})(J),P=(n(52),function(e){function t(e){return Object(v.a)(this,t),Object(b.a)(this,Object(g.a)(t).call(this,e))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement(p.c,{to:"/",className:"app"},r.a.createElement("span",{className:"bang"},"!"),r.a.createElement("button",{className:"app-name"},"Netflix")),r.a.createElement(p.c,{to:"/Login",className:"nav-log-in"},r.a.createElement("button",{className:"nav-log-in-btn"},"Login")),r.a.createElement(p.c,{to:"/signup",className:"nav-sign-up"},r.a.createElement("button",{className:"nav-btn"},"Sign Up"))),r.a.createElement(y.b,{exact:!0,path:"/",render:function(){return r.a.createElement("section",null,r.a.createElement(A,{user:e.props.user}),r.a.createElement(x,{movies:e.props.movies}))}}),r.a.createElement(y.b,{exact:!0,path:"/Login",render:function(){return r.a.createElement("section",null,r.a.createElement(A,{user:e.props.user}),r.a.createElement(x,{movies:e.props.movies}))}}),r.a.createElement(y.b,{exact:!0,path:"/LoggedIn",render:function(){return r.a.createElement("section",null,r.a.createElement("div",{className:"logged-in-bar"},r.a.createElement("h2",{className:"user-name"},e.props.user.name&&"Welcome ".concat(e.props.user.name,"!")),r.a.createElement(p.b,{to:"/",onClick:function(){return e.props.logout()}},r.a.createElement("button",{className:"sign-out-btn"},"Sign Out"))),r.a.createElement(x,{movies:e.props.movies}))}}),r.a.createElement(y.b,{exact:!0,path:"/:id",render:function(t){var n=t.match.params.id,a=e.props.movies.find(function(e){return e.id===parseInt(n)});return a&&r.a.createElement(R,a)}}),r.a.createElement(y.b,{exact:!0,path:"/Favorites",render:function(){return r.a.createElement("section",null,r.a.createElement("div",{className:"logged-in-bar"},r.a.createElement("h2",{className:"user-name"},e.props.user.name&&"Welcome ".concat(e.props.user.name,"!")),r.a.createElement(p.b,{to:"/",onClick:function(){return e.props.logout()}},r.a.createElement("button",{className:"sign-out-btn",onClick:e.logoutUser},"Sign Out"))),r.a.createElement(x,{movies:e.props.userFavorites}))}}),r.a.createElement(y.b,{exact:!0,path:"/signup",render:function(){return r.a.createElement("section",null,r.a.createElement(M,{user:e.props.user}),r.a.createElement(x,{movies:e.props.movies}))}}))}}]),t}(a.Component)),U=Object(c.b)(function(e){return{userFavorites:e.userFavorites}},function(e){return{logout:function(){return e({type:"LOGOUT"})}}})(P),G=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(h.a.mark(function e(){var t=this;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/now_playing?api_key=".concat("26b4ed9978c000b15baddff565ba3d67")).then(function(e){return e.json()}).then(function(e){return e.results}).catch(function(e){return e.message}).then(function(e){return t.props.showMovies(e)});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(U,{movies:this.props.movies,user:this.props.login}))}}]),t}(a.Component),H=Object(c.b)(function(e){return{movies:e.movies,login:e.login}},function(e){return{showMovies:function(t){return e(function(e){return{type:"SHOW_MOVIES",movies:e}}(t))}}})(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=Object(i.createStore)(l,Object(u.composeWithDevTools)()),B=r.a.createElement(p.a,null,r.a.createElement(c.a,{store:V},r.a.createElement(H,null)));s.a.render(B,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.223b04ad.chunk.js.map